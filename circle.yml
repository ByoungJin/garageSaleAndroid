dependencies:
  pre:
    - echo y | android update sdk --no-ui --all --filter "android-26"
    - echo y | android update sdk --no-ui --all --filter "build-tools-26.0.0"
    - echo y | android update sdk --no-ui --all --filter "extra-android-m2repository"
    - echo y | android update sdk --no-ui --all --filter "extra-google-m2repository"

    - echo y | android update sdk --no-ui --all --filter "tool,extra-android-m2repository,extra-android-support,extra-google-google_play_services,extra-google-m2repository"
    - echo y | $ANDROID_HOME/tools/bin/sdkmanager "extras;m2repository;com;android;support;constraint;constraint-layout-solver;1.0.2"

checkout:
  post:
    - sed -i 's/10.0.2.2:3000/garagesalesever.herokuapp.com/g' app/build.gradle
test:
  override:
    - ./gradlew assembleRelease
    - cp -r app/build/outputs $CIRCLE_ARTIFACTS